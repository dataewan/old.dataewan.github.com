{"version":3,"sources":["webpack:///./src/pages/projects/papa-baiden/visualisation.png","webpack:///./src/pages/projects/papa-baiden/index.js","webpack:///./src/pages/projects/papa-baiden/hexgrid.png","webpack:///./src/pages/projects/papa-baiden/spreadsheet-problems.png"],"names":["module","exports","PapaBaiden","render","name","href","fullwidth","caption","src","spreadsheet","note","hexgrid","visualisation","React","Component"],"mappings":"+EAAAA,EAAOC,QAAU,IAA0B,6D,mJCiBrCC,E,gLACJC,OAAA,WACE,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAASC,KAAK,eACZ,kBAAC,IAAD,8NAIgB,IACd,uBAAGC,KAAK,8CAAR,QALF,KAOA,kBAAC,IAAD,CAAYD,KAAK,oBACf,kBAAC,IAAD,yBACoB,IAClB,uBAAGC,KAAK,qCAAR,wBAEK,IAJP,6GAM8C,IAC5C,uBAAGA,KAAK,uFAAR,eAPF,yEAWe,IACb,qNAOJ,kBAAC,IAAD,CAAYD,KAAK,gBACf,kBAAC,IAAD,yHAEoD,IAClD,uBAAGC,KAAK,gIAAR,2CAEK,IALP,mDAMmD,IACjD,uBAAGA,KAAK,uGAAR,UAPF,qEAYA,kBAAC,IAAD,8dAUA,kBAAC,IAAD,CACEC,WAAW,EACXC,QAAQ,8DAER,yBAAKC,IAAKC,OAEZ,kBAAC,IAAD,8OAIsC,mCAJtC,0KAOuB,IACrB,uBAAGJ,KAAK,8FAAR,cARF,qKAgBF,kBAAC,IAAD,CAAYD,KAAK,cACf,kBAAC,IAAD,kMAG+D,IAC7D,6CAJF,+TAWA,kBAAC,IAAD,CACEG,QACE,iDACoB,IAClB,uBAAGF,KAAK,iCAAR,mBAFF,6CAOF,yBAAKG,IAAI,8DAEX,kBAAC,IAAD,CACEE,KACE,uBAAGL,KAAK,gDAAR,iBAFJ,qkBAmBA,kBAAC,IAAD,sCAEE,uBAAGA,KAAK,0CAAR,cAFF,4OAOE,4BACE,+RAOA,mYAQA,6OAQJ,kBAAC,IAAD,CACEE,QACE,iOAGF,yBAAKC,IAAKG,OAGZ,kBAAC,IAAD,+GAKF,kBAAC,IAAD,CAAYP,KAAK,8BACf,kBAAC,IAAD,gTAOA,kBAAC,IAAD,CACEG,QACE,6CACgB,IACd,uBAAGF,KAAK,8CAAR,iBAEK,IAJP,UAQFC,WAAW,GAEX,yBAAKE,IAAKI,OAEZ,kBAAC,IAAD,CAAeR,KAAK,oBAClB,kBAAC,IAAD,0OAMA,kBAAC,IAAD,oJAMF,kBAAC,IAAD,CAAeA,KAAK,yBAClB,kBAAC,IAAD,uNAMA,kBAAC,IAAD,wL,GA7MWS,IAAMC,WA0NhBZ,a,qBC3OfF,EAAOC,QAAU,IAA0B,uD,qBCA3CD,EAAOC,QAAU,IAA0B","file":"component---src-pages-projects-papa-baiden-index-js-0956651da6bbbc27dc6e.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/visualisation-8e61c3168a3a6323c7a49fb13c1ec85a.png\";","import React, { Component } from \"react\";\n\nimport {\n  Section,\n  Subsection,\n  Subsubsection,\n  Paragraph,\n  Code,\n  RawHTML,\n  Figure,\n  Layout\n} from \"../../../components\";\n\nimport spreadsheet from \"./spreadsheet-problems.png\";\nimport hexgrid from \"./hexgrid.png\";\nimport visualisation from \"./visualisation.png\";\n\nclass PapaBaiden extends React.Component {\n  render() {\n    return (\n      <Layout>\n        <Section name=\"Papa Baiden\">\n          <Paragraph>\n            I did a project to study homlessness data in England as part of a\n            voluntary program. I created a data processing pipeline in python,\n            and an interactive data visualisation in react/d3. You can find the\n            visualisation{\" \"}\n            <a href=\"https://dataewan.github.io/tomorrow-today/\">here</a>.\n          </Paragraph>\n          <Subsection name=\"vizforsocialgood\">\n            <Paragraph>\n              I found a link to{\" \"}\n              <a href=\"https://www.vizforsocialgood.com/\">\n                vizforsocialgood.com\n              </a>{\" \"}\n              on twitter. They have a visualisation project underway all the\n              time. The project that I worked on was from{\" \"}\n              <a href=\"https://www.vizforsocialgood.com/join-a-project/2018/1/1/tomorrow-today-papa-baiden\">\n                Papa Baiden\n              </a>\n              , a charity based in London. The project was to meet this\n              requirement:{\" \"}\n              <i>\n                We need an in-depth dashboard that helps people understand the\n                homelessness issues. The data visualisations will be featured on\n                the website, Facebook group, Twitter, and Instagram.\n              </i>\n            </Paragraph>\n          </Subsection>\n          <Subsection name=\"The raw data\">\n            <Paragraph>\n              The raw data came from two sources. First are some spreadsheets\n              containing official UK government figures, called{\" \"}\n              <a href=\"https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/585706/Rough_Sleeping_Autumn_2016_Final_Tables.xls\">\n                Rough_Sleeping_Autumn_2016_Final_Tables\n              </a>{\" \"}\n              which contains statistics on rough sleeping, and{\" \"}\n              <a href=\"https://www.gov.uk/government/statistical-data-sets/live-tables-on-dwelling-stock-including-vacants\">\n                LT_615\n              </a>\n              , which contains information on vacant properties in each region.\n            </Paragraph>\n            <Paragraph>\n              These spreadsheets were fairly tricky to work with. The tabular\n              data only really makes sense when you are a human reading it:\n              there's a hierarchy in the regional data that is described by\n              empty cells and gaps in the data. The codes for the regions\n              changed at a point in time, which causes the black gaps in the\n              data in Figure 1. The description of this change was recorded in\n              quite bureaucratic language in a cell at the bottom of the\n              spreadsheet, not machine readable.\n            </Paragraph>\n            <Figure\n              fullwidth={false}\n              caption=\"Problems in the spreadsheet data caused by codes changing.\"\n            >\n              <img src={spreadsheet} />\n            </Figure>\n            <Paragraph>\n              I think this is a really good illustration of how hard it is to\n              maintain a publicly accessible dataset. The UK government invest a\n              lot of time and effort in making this data available, and they\n              generally do an excellent job. Even <i>they</i> find it difficult\n              to make a correct and complete dataset in machine readable format.\n              I wrote python code to parse these spreadsheets to make them\n              repeatable. The code{\" \"}\n              <a href=\"https://github.com/dataewan/papabaiden-vizforgood-/blob/master/src/data/extract_lt_data.py\">\n                is complex\n              </a>\n              , with lots of logic to catch edge cases. I'm not sure that I\n              would take this approach again. It is good for repeatability of\n              this data, but hard to generalise.\n            </Paragraph>\n          </Subsection>\n          <Subsection name=\"hexgridmap\">\n            <Paragraph>\n              Since this is a project I'm doing in my spare time, I allowed\n              myself to get lost in interesting ideas that don't have a clear\n              payoff. The biggest example is that I tried to avoid using a{\" \"}\n              <i>choropleth map</i>. These are the nice looking maps where\n              geographic areas are coloured to represent a variable. The problem\n              with these maps is that while they look nice, they do a bad job at\n              presenting information. It makes areas that are bigger look more\n              important just because they have a larger area, you get a\n              distorted picture.\n            </Paragraph>\n            <Figure\n              caption={\n                <div>\n                  Illustration from{\" \"}\n                  <a href=\"http://thewhyaxis.info/bitly/\">thewhyaxis.info</a>.\n                  Not that many people read The Scotsman\n                </div>\n              }\n            >\n              <img src=\"http://thewhyaxis.info/content/24-bitly/mediamap-in1.jpg\" />\n            </Figure>\n            <Paragraph\n              note={\n                <a href=\"https://www.redblobgames.com/grids/hexagons/\">\n                  redblobgames\n                </a>\n              }\n            >\n              To get around this problem, one solution is to use a hexagonal\n              grid. You assign each region to a hexagon, and then try and\n              arrange the hexagons on the grid to get them to represent\n              geographic locations. Hexagons are good because they are a regular\n              shape, you can make them have all the same area removing the\n              distortion, and hexagons have a lot of immediate neighbours. The\n              downside of hexagons is that geometric calculations are more\n              complex with hexagons than a square grid. Fortunately there is\n              fascinating tutorial from redblobgames that takes you through the\n              calculations.\n            </Paragraph>\n\n            <Paragraph>\n              I worked on a python package (\n              <a href=\"https://github.com/dataewan/hexgridmap\">hexgridmap</a>)\n              to convert from shapefiles to hexgridmaps. The grid geometry works\n              well, and converting a shapefile to python objects also works\n              well. Where it falls down is locating the regions on the hex grid.\n              I tried a few different approaches.\n              <ul>\n                <li>\n                  Assigning each region naively to the nearest hex on the grid.\n                  Where there are overlaps (multiple regions assigned to the\n                  same hex) sort them out by pushing them outwards. This sort of\n                  works, but doesn't keep neighbouring regions close together\n                  (Figure 3).\n                </li>\n                <li>\n                  Try and create a function that describes a good placement, and\n                  use optimisation techniques like simulated annealing. This is\n                  less time consuming, but I couldn't find a good function to\n                  describe a good placement. You get something that is very\n                  happy once it sorts out all the overlaps, and is happy to\n                  achieve that by scattering regions all over the place.\n                </li>\n                <li>\n                  I was starting to work on a branch that would create\n                  contiguous islands, and then place these next to each other. I\n                  stopped myself after just starting to explore this, and is\n                  where I would pick up again.\n                </li>\n              </ul>\n            </Paragraph>\n            <Figure\n              caption={\n                \"Results from a naive assignment and then pushing overlaps out. The general shape looks okay, but note that the regions in red are regions in Greater London, and get spread out too much. We end up with Ealing on the coast.\"\n              }\n            >\n              <img src={hexgrid} />\n            </Figure>\n\n            <Paragraph>\n              I stopped working on this thread of work after a few sessions,\n              because I wanted to meet the deadline.\n            </Paragraph>\n          </Subsection>\n          <Subsection name=\"Building the visualisation\">\n            <Paragraph>\n              I used react and d3 to build the visualisation. All the\n              interaction and DOM object creation and handling is done by react.\n              Only using d3 for the convenience functions for creating things\n              like scales that map between data and pixel space, or creating SVG\n              path specifications from geographic data.\n            </Paragraph>\n            <Figure\n              caption={\n                <div>\n                  How the final{\" \"}\n                  <a href=\"https://dataewan.github.io/tomorrow-today/\">\n                    visualisation\n                  </a>{\" \"}\n                  looks.\n                </div>\n              }\n              fullwidth={false}\n            >\n              <img src={visualisation} />\n            </Figure>\n            <Subsubsection name=\"What worked well\">\n              <Paragraph>\n                I like the interactivity, it works smoothly. React handling\n                state is a very good way of working. It wasn't complex enough\n                for me to need to reach for Redux. In particular I like the\n                interaction between the table and the maps.\n              </Paragraph>\n              <Paragraph>\n                I like the scrolly bit in the left. You're able to scroll over\n                that bit, while highlighting parts of the visualisation. That's\n                quite neat.\n              </Paragraph>\n            </Subsubsection>\n            <Subsubsection name=\"What didn't work well\">\n              <Paragraph>\n                I didn't do a good job of figuring out how the interactivity was\n                going to work beforehand. Also I don't think I did a good job of\n                making it clear what things can be clicked on. The interactivity\n                is unclear.\n              </Paragraph>\n              <Paragraph>\n                I think that the display is quite full, I wanted there to be\n                more white space and for it to look neater. These both point to\n                me needing to learn more about UI and design.\n              </Paragraph>\n            </Subsubsection>\n          </Subsection>\n        </Section>\n      </Layout>\n    );\n  }\n}\n\nexport default PapaBaiden;\n","module.exports = __webpack_public_path__ + \"static/hexgrid-aa0acf19fc45bcdb104fde9eaea7731a.png\";","module.exports = __webpack_public_path__ + \"static/spreadsheet-problems-e58ad7e5a60e1b5d53dc35ee63c2ae7f.png\";"],"sourceRoot":""}