(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{165:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),o=n(0),i=n.n(o),s=(n(4),n(170)),c=n(460),l=(n(30),n(184)),h=n(178),u=n(217),p=n(461),d=(n(465),n(166)),m=function(e){function t(t){return e.call(this,t)||this}return r()(t,e),t.prototype.render=function(){var e=this,t=300,n=10,a=10,r=50,o=this.props.size[0]-t-n,s=this.props.size[1]-a-r,c=Object(l.d)().domain(this.props.data.map(function(e){return e.title})).range([0,s]),u=Object(h.d)(this.props.data,function(e){return e.gross}),m=Object(l.b)().domain([0,u]).range([0,o]),f=this.props.data.map(function(e,t){return i.a.createElement("rect",{key:t,x:0,y:c(e.title),height:15,width:m(e.gross),fill:d.a.green,stroke:d.a.darkgreen})});return i.a.createElement("svg",{ref:function(t){return e.node=t},width:this.props.size[0],height:this.props.size[1]},i.a.createElement("g",{transform:"translate("+t+" "+a+")"},f,i.a.createElement("g",{transform:"translate(0 7.5)"},i.a.createElement(p.Axis,Object.assign({style:{orient:p.LEFT}},Object(p.axisPropsFromBandedScale)(c))))))},t}(o.Component),f=n(493),g=function(e){function t(t){return e.call(this,t)||this}r()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.createChart()},n.componentDidUpdate=function(e,t){this.createChart()},n.createChart=function(){var e=100,t=100,n=10,a=250,r=this.props.size[0]-e-t,o=this.props.size[1]-n-a,i=this.node,s=Object(u.a)(i).append("g");s.attr("transform","translate("+e+" "+n+")");var c=Object(l.d)().domain(this.props.data.map(function(e){return e.title})).range([0,r]),p=Object(h.d)(this.props.data,function(e){return e.gross}),m=Object(l.b)().domain([0,p]).range([0,o]),g=Object(f.a)(c);Object(u.a)(i).append("g").attr("class","xAxis").attr("transform","translate("+e+" "+(o+n)+")").call(g),Object(u.a)(i).select("g.xAxis").selectAll("path").style("display","none"),Object(u.a)(i).select("g.xAxis").selectAll("text").attr("y",0).attr("x",-9).attr("dy",".35em").attr("transform","rotate(270)").attr("text-anchor","end"),s.selectAll("rect").data(this.props.data).enter().append("rect"),s.selectAll("rect").data(this.props.data).exit().remove();s.selectAll("rect").data(this.props.data).attr("x",function(e){return c(e.title)-15}).attr("y",function(e){return o-m(e.gross)}).attr("height",function(e){return m(e.gross)}).attr("width",30).style("fill",d.a.blue).style("stroke",d.a.darkblue)},n.render=function(){var e=this;return i.a.createElement("svg",{ref:function(t){return e.node=t},width:this.props.size[0],height:this.props.size[1]})},t}(o.Component),E=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={data:c},n}return r()(t,e),t.prototype.render=function(){return i.a.createElement(s.e,null,i.a.createElement("article",null,i.a.createElement(s.j,{name:"Making use of d3"},i.a.createElement(s.h,{note:i.a.createElement("a",{href:"https://medium.com/@Elijah_Meeks/interactive-applications-with-react-d3-f76f7b3ebc71"},"Elijah Meeks' post")},i.a.createElement("a",{href:"https://d3js.org/"},"d3")," is very cool. Getting it to work properly with react is difficult, the two libraries squabble with each other trying to control the DOM. Elijah Meeks has a blog post that describes a few for getting the two to work together better. I'm going to work through these examples here."),i.a.createElement(s.k,{name:"Use React and D3 together"},i.a.createElement(s.h,null,"This option is the one that people tend to recommend. You use D3 to inform all the drawing instructions. So for example making scales that convert from the data space to the pixel space, or converting data into a SVG path. You then give these drawing instructions to react. React handles the creating and updating of the DOM elements."),i.a.createElement(s.d,{caption:"Using only react to draw the SVG that makes the chart"},i.a.createElement(m,{size:[500,240],data:this.state.data})),i.a.createElement(s.h,null,"The advantages of this method are that you get to take advantage of the react managment of the virtual DOM, so performance should be better. Also it means that you have less D3 in your code, so it is easier to share with people with a react background."),i.a.createElement(s.h,{note:i.a.createElement("div",null,i.a.createElement("a",{href:"https://github.com/shauns/react-d3-axis"},"Implementing axis in pure react"),i.a.createElement("br",null),i.a.createElement("a",{href:"https://github.com/reactjs/react-transition-group"},"Transitions in react"))},"The disadvantages are that there are some SVG elements that D3 is really good at drawing, like axes. Drawing these without using D3 would be really tedious. Additionally, there are things like transitions that D3 does really well, which aren't as easy to do in react. There are ways to achieve the same effects by using pure react, but I'm less experienced with these.")),i.a.createElement(s.k,{name:"Use D3 as normal, and tell react to go away"},i.a.createElement(s.h,null,"This method feels more natural if you've used a lot of D3 in the past. It probably is a good idea to transition more to using pure react for most things. I'm going to keep this method in my pocket though. If there is something that is really well implemented in D3, this will be a good option. You can use all the same D3 code as you used previously."),i.a.createElement(s.d,{caption:"Using D3, and stopping react from updating the DOM"},i.a.createElement(g,{size:[500,500],data:this.state.data})),i.a.createElement(s.h,null,"There are two tricks to this method. The first is that in the render method of your component, you find the reference to the DOM element you're creating."),i.a.createElement(s.b,{language:"javascript",code:"\nrender() {\n  return (\n    <svg\n      ref={node => this.node = node}\n      width={ this.props.size[0] }\n      height={this.props.size[1]}/>\n  );\n}\n            "}),i.a.createElement(s.h,null,i.a.createElement("span",{className:"mono"},"this.node")," is then a property of the component object. In this example it will refer to the SVG DOM element. The next trick is to intercept the ",i.a.createElement("a",{href:"https://reactjs.org/docs/react-component.html#the-component-lifecycle"},"react lifecycle methods,")," and use them to trigger D3 functions to update the plot."),i.a.createElement(s.b,{language:"javascript",code:"\ncomponentDidMount() {\n  this.createChart()\n}\n\ncomponentDidUpdate(prevProps, prevState) {\n  this.createChart()\n}\n\ncreateChart(){\n  /* \n   * make your scale functions and so on here \n   */\n\n  // now do the d3 as normal. Start off by selecting this.node, which is our\n  // <svg> node\n  d3.select(this.node)\n    // assume for this example that data has been passed through as a prop\n    .data(this.props.data)\n    .enter()\n    .append('circle')\n    // ....\n            "})),i.a.createElement(s.h,null,"The ",i.a.createElement("span",{className:"mono"},"createChart()")," function will contain all the regular D3 code. If you're using transitions, then I think you might want an ",i.a.createElement("span",{className:"mono"},"updateChart()")," function as well."))))},t}(o.Component);t.default=E},166:function(e,t,n){"use strict";t.a={grey:"#50514F",darkgrey:"#3c3d3b",lightgrey:"#646563",vlightgrey:"#cccdcb",red:"#F25F5C",darkred:"#de4b48",lightred:"#ff7370",yellow:"#FFE066",darkyellow:"#ebcc52",lightyellow:"#fff47a",blue:"#247BA0",darkblue:"#10678c",lightblue:"#388fb4",vlightblue:"#b1d7e7",green:"#70C1B3",darkgreen:"#5cad9f",lightgreen:"#84d5c7"}},167:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(4),i=n.n(o),s=n(28),c=n.n(s);n.d(t,"a",function(){return c.a});n(169),r.a.createContext({});i.a.object,i.a.string.isRequired,i.a.func,i.a.func},169:function(e,t,n){var a;e.exports=(a=n(171))&&a.default||a},170:function(e,t,n){"use strict";var a=n(6),r=n.n(a),o=n(0),i=n.n(o),s=n(166),c=n(167),l=n(70),h=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){return i.a.createElement("div",{className:"containerrow"},i.a.createElement("div",{className:"content"},i.a.createElement("blockquote",null,this.props.children)),i.a.createElement("div",{className:"note"},i.a.createElement("a",{href:this.props.source},i.a.createElement("h6",null,this.props.person))))},t}(o.Component),u=n(173),p=n.n(u),d=n(174),m=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){var e=this.props.language;return i.a.createElement("div",{className:"containerrow"},i.a.createElement("pre",{className:"content"},i.a.createElement(p.a,{language:e,style:d.coy},this.props.code)))},t}(o.Component),f=function(e){function t(){return e.apply(this,arguments)||this}r()(t,e);var n=t.prototype;return n.getcaption=function(){return!0!==this.props.fullwidth?i.a.createElement("figcaption",{className:"note"},i.a.createElement("h6",{className:"figurelabel"}),this.props.caption):i.a.createElement("figcaption",{className:"fullwidth"},i.a.createElement("h6",{className:"figurelabel"}),this.props.caption)},n.getdiv=function(){return!0!==this.props.fullwidth?i.a.createElement("div",{className:"content"},this.props.children):i.a.createElement("div",{className:"fullwidth"},this.props.children)},n.render=function(){var e=this.getcaption(),t=this.getdiv();return this.props.fullwidth?i.a.createElement("figure",{className:"containerrow"},t,e):i.a.createElement("figure",{className:"containerrow"},e,t)},t}(o.Component),g=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){var e=this.props.note;return i.a.createElement("div",{className:"containerrow"},void 0!==e&&i.a.createElement("aside",{className:"note"},e),i.a.createElement("p",{className:"content"},this.props.children))},t}(o.Component),E=(n(168),n(29),function(e){function t(){return e.apply(this,arguments)||this}r()(t,e);var n=t.prototype;return n.getName=function(){return this.props.name.replace(/[^\w]/g,"").toLowerCase()},n.render=function(){var e=this.getName();return i.a.createElement("section",null,i.a.createElement("div",{className:"containerrow"},i.a.createElement("h2",{className:"content",id:e},this.props.name)),this.props.children)},t}(o.Component)),y=function(e){function t(){return e.apply(this,arguments)||this}r()(t,e);var n=t.prototype;return n.getName=function(){return this.props.name.replace(/[^\w]/g,"").toLowerCase()},n.render=function(){var e=this.getName();return i.a.createElement("section",null,i.a.createElement("div",{className:"containerrow"},i.a.createElement("h3",{className:"content",id:e},this.props.name)),this.props.children)},t}(o.Component),b=function(e){function t(){return e.apply(this,arguments)||this}r()(t,e);var n=t.prototype;return n.getName=function(){return this.props.name.replace(/[^\w]/g,"").toLowerCase()},n.render=function(){var e=this.getName();return i.a.createElement("section",null,i.a.createElement("div",{className:"containerrow"},i.a.createElement("h4",{className:"content",id:e},this.props.name)),this.props.children)},t}(o.Component),w=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){return i.a.createElement("nav",{css:{paddingBottom:Object(l.rhythm)(2)}},this.props.children)},t}(o.Component),v=(n(71),function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){var e=this.props.to.split("/").slice(-1)[0];return i.a.createElement("div",{className:"containerrow"},i.a.createElement("div",{className:"content",css:{border:"1px solid "+s.a.blue}},i.a.createElement(c.a,{css:{display:"block",color:s.a.darkblue,backgroundColor:s.a.vlightblue},to:this.props.to},e),i.a.createElement("div",{css:{paddingLeft:Object(l.rhythm)(1)}},this.props.desc)))},t}(o.Component)),k=function(e){function t(t){return e.call(this,t)||this}return r()(t,e),t.prototype.render=function(){return i.a.createElement("div",{className:"containerrow"},i.a.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:this.props.children}}))},t}(o.Component),N=(n(4),n(175)),x=n.n(N),C=(n(176),n(177),function(e){var t=e.children;return i.a.createElement("div",null,i.a.createElement(x.a,{title:"Things I wish I could remember",meta:[{name:"description",content:"dataewan things to remember"},{name:"keywords",content:"notebook, explaination"}]}),i.a.createElement("div",{className:"containerrow"},i.a.createElement("header",{className:"content"},i.a.createElement("a",{href:"https://twitter.com/dataewan",className:"twitterlink"},i.a.createElement("img",{src:"./twitter.png",alt:"twitter link",width:"25"})),i.a.createElement(c.a,{to:"/"},i.a.createElement("h1",null,"dataewan")))),t)}),D=n(172),j=n.n(D),O=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){return i.a.createElement("figure",{className:"containerrow"},i.a.createElement(j.a,null,this.props.equation),i.a.createElement("h6",{className:"equationlabel"}))},t}(o.Component);n.d(t,"a",function(){return h}),n.d(t,"b",function(){return m}),n.d(t,"d",function(){return f}),n.d(t,"h",function(){return g}),n.d(t,"j",function(){return E}),n.d(t,"k",function(){return y}),n.d(t,"l",function(){return b}),n.d(t,"g",function(){return w}),n.d(t,"f",function(){return v}),n.d(t,"i",function(){return k}),n.d(t,"e",function(){return C}),n.d(t,"c",function(){return O})},171:function(e,t,n){"use strict";n.r(t);n(30);var a=n(0),r=n.n(a),o=n(4),i=n.n(o),s=n(51),c=n(2),l=function(e){var t=e.location,n=c.default.getResourcesForPathnameSync(t.pathname);return n?r.a.createElement(s.a,Object.assign({location:t,pageResources:n},n.json)):null};l.propTypes={location:i.a.shape({pathname:i.a.string.isRequired}).isRequired},t.default=l},460:function(e){e.exports=[{rank:1,title:"Beauty and the Beast",distributor:"Disney",gross:1263521126},{rank:2,title:"The Fate of the Furious",distributor:"Universal",gross:1239078381},{rank:3,title:"Despicable Me 3",distributor:"Universal",gross:1025164659},{rank:4,title:"Spider-Man: Homecoming",distributor:"Sony Pictures",gross:880132609},{rank:5,title:"Wolf Warrior 2",distributor:"United Entertainment",gross:870325439},{rank:6,title:"Guardians of the Galaxy Vol. 2",distributor:"Disney",gross:863564415},{rank:7,title:"Wonder Woman",distributor:"Warner Bros.",gross:821763408},{rank:8,title:"Pirates of the Caribbean: Dead Men Tell No Tales",distributor:"Disney",gross:794777455},{rank:9,title:"Thor: Ragnarok",distributor:"Disney",gross:745149643},{rank:10,title:"It",distributor:"Warner Bros.",gross:688043e3}]}}]);
//# sourceMappingURL=component---src-pages-techniques-programming-d-3-index-js-40edc7a088c5638259e2.js.map