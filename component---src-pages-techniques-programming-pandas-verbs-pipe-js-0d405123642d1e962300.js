(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{159:function(t,e,n){"use strict";n.r(e);var a=n(6),d=n.n(a),r=n(0),o=n.n(r),i=(n(4),n(170)),s=n(195),h=n.n(s),l=n(481),c=n.n(l),u=n(482),m=n.n(u),p=function(t){function e(e){return t.call(this,e)||this}return d()(e,t),e.prototype.render=function(){return o.a.createElement(i.e,null,o.a.createElement(i.j,{name:"pipe"},o.a.createElement(i.h,{note:o.a.createElement("a",{href:"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.pipe.html"},"pandas documentation")},"All the other data verbs we've been using are functions that are part of the dataframe class. That set of verbs is very comprehensive, and covers most use cases. The"," ",o.a.createElement("span",{className:"mono"},"pipe")," operation is a way for us to be more flexible, and perform any operation as a data verb. It applies the function to the dataframe, returning whatever the function returns."),o.a.createElement(i.h,{note:o.a.createElement("a",{href:"https://gist.github.com/dataewan/9e3eb3fee268b1eb4a629fd216e20712"},"where the data comes from")},"I'll be using the movies dataframe. Here's a sample of that data."),o.a.createElement(i.i,null,h.a),o.a.createElement(i.k,{name:"Arbitrary operations, making your own verbs"},o.a.createElement(i.h,null,"You can make your own functions that work like verbs. These take a dataframe and return a copy of that dataframe with some changes applied. Here I'm making two functions, one that converts a string formatted date to a pandas date, and a second one that extracts the year from that date."),o.a.createElement(i.b,{language:"python",code:"\ndef convert_date(x):\n    return (\n        x\n        .assign(date = pd.to_datetime(x.release_date))\n    )\n\ndef extract_year(x):\n    return (\n        x\n        .assign(yr = x.date.dt.year)\n    )\n          "}),o.a.createElement(i.h,null,"Instead of having to apply these functions like this:"),o.a.createElement(i.b,{language:"python",code:"\nextract_year(convert_date(movies))\n        "}),o.a.createElement(i.h,null,"I can use them in a chain like this:"),o.a.createElement(i.b,{language:"python",code:"\n(\n    movies\n    .pipe(convert_date)\n    .pipe(extract_year)\n)\n        "}),o.a.createElement(i.h,null,"This gives the same result, but is nicer pandas code."),o.a.createElement(i.i,null,c.a)),o.a.createElement(i.k,{name:"Working with a mutated dataframe"},o.a.createElement(i.h,null,"This is a specific use case of making your own verb, but is a very useful case. If you are making a chain that mutates the dataframe somehow, let's say that we're making a new column. If we want to use that new column in subsequent steps pandas will say that it can't find it. Here I'm making a new date column, which I want to take the month from."),o.a.createElement(i.b,{language:"python",code:"\n(\n    movies\n    .assign(date = pd.to_datetime(movies.release_date))\n    .assign(month = movies.date.dt.month)\n)\n# Fails with AttributeError: 'DataFrame' object has no attribute 'date'\n          "}),o.a.createElement(i.h,null,"If I'd been mutating in-place in the dataframe (assigning the new values to the release_date column), then the second row would try and work with the original column and not the mutated one. That can cause some tricky bugs."),o.a.createElement(i.h,null,"Instead we can use the pipe function to get access to the mutated columns in subsequent stages of the chain. I'm using"," ",o.a.createElement("a",{href:"https://dbader.org/blog/python-lambda-functions"},"lambda functions")," ","here because I don't intend to use them again."),o.a.createElement(i.b,{language:"python",code:"\n(\n    movies\n    .pipe(lambda x: x.assign(date = pd.to_datetime(x.release_date)))\n    .pipe(lambda x: x.assign(month = x.date.dt.month))\n)\n          "}),o.a.createElement(i.h,null,"This gives the intended result."),o.a.createElement(i.i,null,m.a))))},e}(r.Component);e.default=p},166:function(t,e,n){"use strict";e.a={grey:"#50514F",darkgrey:"#3c3d3b",lightgrey:"#646563",vlightgrey:"#cccdcb",red:"#F25F5C",darkred:"#de4b48",lightred:"#ff7370",yellow:"#FFE066",darkyellow:"#ebcc52",lightyellow:"#fff47a",blue:"#247BA0",darkblue:"#10678c",lightblue:"#388fb4",vlightblue:"#b1d7e7",green:"#70C1B3",darkgreen:"#5cad9f",lightgreen:"#84d5c7"}},167:function(t,e,n){"use strict";var a=n(0),d=n.n(a),r=n(4),o=n.n(r),i=n(28),s=n.n(i);n.d(e,"a",function(){return s.a});n(169),d.a.createContext({});o.a.object,o.a.string.isRequired,o.a.func,o.a.func},169:function(t,e,n){var a;t.exports=(a=n(171))&&a.default||a},170:function(t,e,n){"use strict";var a=n(6),d=n.n(a),r=n(0),o=n.n(r),i=n(166),s=n(167),h=n(70),l=function(t){function e(){return t.apply(this,arguments)||this}return d()(e,t),e.prototype.render=function(){return o.a.createElement("div",{className:"containerrow"},o.a.createElement("div",{className:"content"},o.a.createElement("blockquote",null,this.props.children)),o.a.createElement("div",{className:"note"},o.a.createElement("a",{href:this.props.source},o.a.createElement("h6",null,this.props.person))))},e}(r.Component),c=n(173),u=n.n(c),m=n(174),p=function(t){function e(){return t.apply(this,arguments)||this}return d()(e,t),e.prototype.render=function(){var t=this.props.language;return o.a.createElement("div",{className:"containerrow"},o.a.createElement("pre",{className:"content"},o.a.createElement(u.a,{language:t,style:m.coy},this.props.code)))},e}(r.Component),f=function(t){function e(){return t.apply(this,arguments)||this}d()(e,t);var n=e.prototype;return n.getcaption=function(){return!0!==this.props.fullwidth?o.a.createElement("figcaption",{className:"note"},o.a.createElement("h6",{className:"figurelabel"}),this.props.caption):o.a.createElement("figcaption",{className:"fullwidth"},o.a.createElement("h6",{className:"figurelabel"}),this.props.caption)},n.getdiv=function(){return!0!==this.props.fullwidth?o.a.createElement("div",{className:"content"},this.props.children):o.a.createElement("div",{className:"fullwidth"},this.props.children)},n.render=function(){var t=this.getcaption(),e=this.getdiv();return this.props.fullwidth?o.a.createElement("figure",{className:"containerrow"},e,t):o.a.createElement("figure",{className:"containerrow"},t,e)},e}(r.Component),g=function(t){function e(){return t.apply(this,arguments)||this}return d()(e,t),e.prototype.render=function(){var t=this.props.note;return o.a.createElement("div",{className:"containerrow"},void 0!==t&&o.a.createElement("aside",{className:"note"},t),o.a.createElement("p",{className:"content"},this.props.children))},e}(r.Component),b=(n(168),n(29),function(t){function e(){return t.apply(this,arguments)||this}d()(e,t);var n=e.prototype;return n.getName=function(){return this.props.name.replace(/[^\w]/g,"").toLowerCase()},n.render=function(){var t=this.getName();return o.a.createElement("section",null,o.a.createElement("div",{className:"containerrow"},o.a.createElement("h2",{className:"content",id:t},this.props.name)),this.props.children)},e}(r.Component)),v=function(t){function e(){return t.apply(this,arguments)||this}d()(e,t);var n=e.prototype;return n.getName=function(){return this.props.name.replace(/[^\w]/g,"").toLowerCase()},n.render=function(){var t=this.getName();return o.a.createElement("section",null,o.a.createElement("div",{className:"containerrow"},o.a.createElement("h3",{className:"content",id:t},this.props.name)),this.props.children)},e}(r.Component),y=function(t){function e(){return t.apply(this,arguments)||this}d()(e,t);var n=e.prototype;return n.getName=function(){return this.props.name.replace(/[^\w]/g,"").toLowerCase()},n.render=function(){var t=this.getName();return o.a.createElement("section",null,o.a.createElement("div",{className:"containerrow"},o.a.createElement("h4",{className:"content",id:t},this.props.name)),this.props.children)},e}(r.Component),E=function(t){function e(){return t.apply(this,arguments)||this}return d()(e,t),e.prototype.render=function(){return o.a.createElement("nav",{css:{paddingBottom:Object(h.rhythm)(2)}},this.props.children)},e}(r.Component),w=(n(71),function(t){function e(){return t.apply(this,arguments)||this}return d()(e,t),e.prototype.render=function(){var t=this.props.to.split("/").slice(-1)[0];return o.a.createElement("div",{className:"containerrow"},o.a.createElement("div",{className:"content",css:{border:"1px solid "+i.a.blue}},o.a.createElement(s.a,{css:{display:"block",color:i.a.darkblue,backgroundColor:i.a.vlightblue},to:this.props.to},t),o.a.createElement("div",{css:{paddingLeft:Object(h.rhythm)(1)}},this.props.desc)))},e}(r.Component)),N=function(t){function e(e){return t.call(this,e)||this}return d()(e,t),e.prototype.render=function(){return o.a.createElement("div",{className:"containerrow"},o.a.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:this.props.children}}))},e}(r.Component),k=(n(4),n(175)),C=n.n(k),A=(n(176),n(177),function(t){var e=t.children;return o.a.createElement("div",null,o.a.createElement(C.a,{title:"Things I wish I could remember",meta:[{name:"description",content:"dataewan things to remember"},{name:"keywords",content:"notebook, explaination"}]}),o.a.createElement("div",{className:"containerrow"},o.a.createElement("header",{className:"content"},o.a.createElement("a",{href:"https://twitter.com/dataewan",className:"twitterlink"},o.a.createElement("img",{src:"./twitter.png",alt:"twitter link",width:"25"})),o.a.createElement(s.a,{to:"/"},o.a.createElement("h1",null,"dataewan")))),e)}),x=n(172),_=n.n(x),R=function(t){function e(){return t.apply(this,arguments)||this}return d()(e,t),e.prototype.render=function(){return o.a.createElement("figure",{className:"containerrow"},o.a.createElement(_.a,null,this.props.equation),o.a.createElement("h6",{className:"equationlabel"}))},e}(r.Component);n.d(e,"a",function(){return l}),n.d(e,"b",function(){return p}),n.d(e,"d",function(){return f}),n.d(e,"h",function(){return g}),n.d(e,"j",function(){return b}),n.d(e,"k",function(){return v}),n.d(e,"l",function(){return y}),n.d(e,"g",function(){return E}),n.d(e,"f",function(){return w}),n.d(e,"i",function(){return N}),n.d(e,"e",function(){return A}),n.d(e,"c",function(){return R})},171:function(t,e,n){"use strict";n.r(e);n(30);var a=n(0),d=n.n(a),r=n(4),o=n.n(r),i=n(51),s=n(2),h=function(t){var e=t.location,n=s.default.getResourcesForPathnameSync(e.pathname);return n?d.a.createElement(i.a,Object.assign({location:e,pageResources:n},n.json)):null};h.propTypes={location:o.a.shape({pathname:o.a.string.isRequired}).isRequired},e.default=h},195:function(t,e){t.exports='<table border="1" class="dataframe">\n  <thead>\n    <tr style="text-align: right;">\n      <th></th>\n      <th>budget</th>\n      <th>id</th>\n      <th>original_title</th>\n      <th>overview</th>\n      <th>popularity</th>\n      <th>release_date</th>\n      <th>runtime</th>\n      <th>status</th>\n      <th>tagline</th>\n      <th>title</th>\n      <th>vote_average</th>\n      <th>vote_count</th>\n      <th>year</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>237000000</td>\n      <td>19995</td>\n      <td>Avatar</td>\n      <td>In the 22nd century, a paraplegic Marine is di...</td>\n      <td>150.437577</td>\n      <td>2009-12-10</td>\n      <td>162.0</td>\n      <td>Released</td>\n      <td>Enter the World of Pandora.</td>\n      <td>Avatar</td>\n      <td>7.2</td>\n      <td>11800</td>\n      <td>2009.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>300000000</td>\n      <td>285</td>\n      <td>Pirates of the Caribbean: At World\'s End</td>\n      <td>Captain Barbossa, long believed to be dead, ha...</td>\n      <td>139.082615</td>\n      <td>2007-05-19</td>\n      <td>169.0</td>\n      <td>Released</td>\n      <td>At the end of the world, the adventure begins.</td>\n      <td>Pirates of the Caribbean: At World\'s End</td>\n      <td>6.9</td>\n      <td>4500</td>\n      <td>2007.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>245000000</td>\n      <td>206647</td>\n      <td>Spectre</td>\n      <td>A cryptic message from Bond’s past sends him o...</td>\n      <td>107.376788</td>\n      <td>2015-10-26</td>\n      <td>148.0</td>\n      <td>Released</td>\n      <td>A Plan No One Escapes</td>\n      <td>Spectre</td>\n      <td>6.3</td>\n      <td>4466</td>\n      <td>2015.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>250000000</td>\n      <td>49026</td>\n      <td>The Dark Knight Rises</td>\n      <td>Following the death of District Attorney Harve...</td>\n      <td>112.312950</td>\n      <td>2012-07-16</td>\n      <td>165.0</td>\n      <td>Released</td>\n      <td>The Legend Ends</td>\n      <td>The Dark Knight Rises</td>\n      <td>7.6</td>\n      <td>9106</td>\n      <td>2012.0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>260000000</td>\n      <td>49529</td>\n      <td>John Carter</td>\n      <td>John Carter is a war-weary, former military ca...</td>\n      <td>43.926995</td>\n      <td>2012-03-07</td>\n      <td>132.0</td>\n      <td>Released</td>\n      <td>Lost in our world, found in another.</td>\n      <td>John Carter</td>\n      <td>6.1</td>\n      <td>2124</td>\n      <td>2012.0</td>\n    </tr>\n  </tbody>\n</table>'},481:function(t,e){t.exports='<table border="1" class="dataframe">\n  <thead>\n    <tr style="text-align: right;">\n      <th></th>\n      <th>budget</th>\n      <th>id</th>\n      <th>original_title</th>\n      <th>overview</th>\n      <th>popularity</th>\n      <th>release_date</th>\n      <th>runtime</th>\n      <th>status</th>\n      <th>tagline</th>\n      <th>title</th>\n      <th>vote_average</th>\n      <th>vote_count</th>\n      <th>date</th>\n      <th>yr</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>237000000</td>\n      <td>19995</td>\n      <td>Avatar</td>\n      <td>In the 22nd century, a paraplegic Marine is di...</td>\n      <td>150.437577</td>\n      <td>2009-12-10</td>\n      <td>162.0</td>\n      <td>Released</td>\n      <td>Enter the World of Pandora.</td>\n      <td>Avatar</td>\n      <td>7.2</td>\n      <td>11800</td>\n      <td>2009-12-10</td>\n      <td>2009.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>300000000</td>\n      <td>285</td>\n      <td>Pirates of the Caribbean: At World\'s End</td>\n      <td>Captain Barbossa, long believed to be dead, ha...</td>\n      <td>139.082615</td>\n      <td>2007-05-19</td>\n      <td>169.0</td>\n      <td>Released</td>\n      <td>At the end of the world, the adventure begins.</td>\n      <td>Pirates of the Caribbean: At World\'s End</td>\n      <td>6.9</td>\n      <td>4500</td>\n      <td>2007-05-19</td>\n      <td>2007.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>245000000</td>\n      <td>206647</td>\n      <td>Spectre</td>\n      <td>A cryptic message from Bond’s past sends him o...</td>\n      <td>107.376788</td>\n      <td>2015-10-26</td>\n      <td>148.0</td>\n      <td>Released</td>\n      <td>A Plan No One Escapes</td>\n      <td>Spectre</td>\n      <td>6.3</td>\n      <td>4466</td>\n      <td>2015-10-26</td>\n      <td>2015.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>250000000</td>\n      <td>49026</td>\n      <td>The Dark Knight Rises</td>\n      <td>Following the death of District Attorney Harve...</td>\n      <td>112.312950</td>\n      <td>2012-07-16</td>\n      <td>165.0</td>\n      <td>Released</td>\n      <td>The Legend Ends</td>\n      <td>The Dark Knight Rises</td>\n      <td>7.6</td>\n      <td>9106</td>\n      <td>2012-07-16</td>\n      <td>2012.0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>260000000</td>\n      <td>49529</td>\n      <td>John Carter</td>\n      <td>John Carter is a war-weary, former military ca...</td>\n      <td>43.926995</td>\n      <td>2012-03-07</td>\n      <td>132.0</td>\n      <td>Released</td>\n      <td>Lost in our world, found in another.</td>\n      <td>John Carter</td>\n      <td>6.1</td>\n      <td>2124</td>\n      <td>2012-03-07</td>\n      <td>2012.0</td>\n    </tr>\n  </tbody>\n</table>'},482:function(t,e){t.exports='<table border="1" class="dataframe">\n  <thead>\n    <tr style="text-align: right;">\n      <th></th>\n      <th>budget</th>\n      <th>id</th>\n      <th>original_title</th>\n      <th>overview</th>\n      <th>popularity</th>\n      <th>release_date</th>\n      <th>runtime</th>\n      <th>status</th>\n      <th>tagline</th>\n      <th>title</th>\n      <th>vote_average</th>\n      <th>vote_count</th>\n      <th>date</th>\n      <th>month</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>237000000</td>\n      <td>19995</td>\n      <td>Avatar</td>\n      <td>In the 22nd century, a paraplegic Marine is di...</td>\n      <td>150.437577</td>\n      <td>2009-12-10</td>\n      <td>162.0</td>\n      <td>Released</td>\n      <td>Enter the World of Pandora.</td>\n      <td>Avatar</td>\n      <td>7.2</td>\n      <td>11800</td>\n      <td>2009-12-10</td>\n      <td>12.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>300000000</td>\n      <td>285</td>\n      <td>Pirates of the Caribbean: At World\'s End</td>\n      <td>Captain Barbossa, long believed to be dead, ha...</td>\n      <td>139.082615</td>\n      <td>2007-05-19</td>\n      <td>169.0</td>\n      <td>Released</td>\n      <td>At the end of the world, the adventure begins.</td>\n      <td>Pirates of the Caribbean: At World\'s End</td>\n      <td>6.9</td>\n      <td>4500</td>\n      <td>2007-05-19</td>\n      <td>5.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>245000000</td>\n      <td>206647</td>\n      <td>Spectre</td>\n      <td>A cryptic message from Bond’s past sends him o...</td>\n      <td>107.376788</td>\n      <td>2015-10-26</td>\n      <td>148.0</td>\n      <td>Released</td>\n      <td>A Plan No One Escapes</td>\n      <td>Spectre</td>\n      <td>6.3</td>\n      <td>4466</td>\n      <td>2015-10-26</td>\n      <td>10.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>250000000</td>\n      <td>49026</td>\n      <td>The Dark Knight Rises</td>\n      <td>Following the death of District Attorney Harve...</td>\n      <td>112.312950</td>\n      <td>2012-07-16</td>\n      <td>165.0</td>\n      <td>Released</td>\n      <td>The Legend Ends</td>\n      <td>The Dark Knight Rises</td>\n      <td>7.6</td>\n      <td>9106</td>\n      <td>2012-07-16</td>\n      <td>7.0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>260000000</td>\n      <td>49529</td>\n      <td>John Carter</td>\n      <td>John Carter is a war-weary, former military ca...</td>\n      <td>43.926995</td>\n      <td>2012-03-07</td>\n      <td>132.0</td>\n      <td>Released</td>\n      <td>Lost in our world, found in another.</td>\n      <td>John Carter</td>\n      <td>6.1</td>\n      <td>2124</td>\n      <td>2012-03-07</td>\n      <td>3.0</td>\n    </tr>\n  </tbody>\n</table>'}}]);
//# sourceMappingURL=component---src-pages-techniques-programming-pandas-verbs-pipe-js-0d405123642d1e962300.js.map